function generateTemplate(a,b,c,d){return d=d||!1,new Promise(function(e,f){if(void 0===a||!a.length&&"object"!=typeof a)f(b+" "+c+" failed to generate handlebars template");else{var g=Handlebars.compile($(b).html());d?$(c).append(g({obj:a})):$(c).html(g({obj:a})),e()}})}function chopped(a,b){var c=$(a).text();c=c.replace(/\r?\n|\r/g,""),c=c.trim().length,c>b?$(a).next(".see-more").css("display","block"):choppedByLine(a,5)}function choppedByLine(a,b){$(a).text().match(new RegExp("\n","g")).length>b?$(a).next(".see-more").css("display","block"):$(a).removeClass("chopped")}function IsInternalLink(a){var b=window.location.hostname;return a.includes(b)}function isOnScreen(a){if(0!=a.length){var b=jQuery(window),c=b.scrollTop(),d=b.height(),e=c+d,f=jQuery(a),g=f.offset().top,h=f.height(),i=g+h;return g>=c&&g<e||i>c&&i<=e||h>d&&g<=c&&i>=e}}function deviceOrientation(a,b,c){window.matchMedia("(orientation: portrait)").matches&&("portrait"!=a&&"both"!=a||b()),window.matchMedia("(orientation: landscape)").matches&&("landscape"!=a&&"both"!=a||c())}function getUrlParameter(a){return decodeURIComponent((new RegExp("[?|&]"+a+"=([^&;]+?)(&|#|;|$)").exec(location.search)||["",""])[1].replace(/\+/g,"%20"))||null}function initPopover(a){if($(a).length){var b={html:!0,placement:function(a){var b=this;return document.documentElement.clientWidth<450&&setTimeout(function(){var c=$(a)[0].getBoundingClientRect().left,d=355+c;if(document.documentElement.clientWidth<d){var e=d-document.documentElement.clientWidth;b.$tip.css("left",parseFloat(b.$tip.css("left").replace("px",""))-e),b.$arrow.css("left",parseFloat(b.$arrow.css("left").replace("px",""))+e)}},0),b.$element.data("position")?b.$element.data("position"):"top"},trigger:"trigger",content:function(){var a=$(this).data("content-id")||null;if(null!==a&&$(a).length)return $(a).html()},template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content iconlist"></div></div>'};$(a).popover(b)}}function bindValidateEmail(a){a.length&&a.closest("form").data("validate-blur")&&a.on("blur",function(b){""==a.val()?setTimeout(function(){isEmailValid($(b.currentTarget))},500):isEmailValid($(b.currentTarget))})}function bindValidateName(a){a.length&&a.closest("form").data("validate-blur")&&a.on("blur",function(a){isNameValid($(a.currentTarget))})}function bindValidatePhone(a){a.mask("000-000-0000"),a.length&&a.closest("form").data("validate-blur")&&a.on("blur",function(b){""==a.val()?setTimeout(function(){isPhoneNumberValid($(b.currentTarget))},500):isPhoneNumberValid($(b.currentTarget))})}function isEmailValid(a,b){return a.prop("required")||""!==a.val()?/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(a.val())?(a.parent().removeClass("error").find(".error-msg").hide(),!0):(a.parent().addClass("error").find(".error-msg").show(),b&&a.trigger("focus").parent().addClass("error").find(".error-msg").show(),!1):(a.parent().removeClass("error").find(".error-msg").hide(),!0)}function isNameValid(a,b){return!a.prop("required")&&""===a.val()||(0===a.length||""==a.val().trim()?(a.parent().addClass("error").find(".error-msg").show(),b&&a.trigger("focus").parent().addClass("error").find(".error-msg").show(),!1):(a.parent().removeClass("error").find(".error-msg").hide(),!0))}function isPhoneNumberValid(a,b){return!a.prop("required")&&""===a.val()||(a.val().length<12?(a.parent().addClass("error").find(".error-msg").show(),b&&a.trigger("focus").parent().addClass("error").find(".error-msg").show(),!1):(a.parent().removeClass("error").find(".error-msg").hide(),!0))}function addEmailSubscribe(){if(1==count2240){for(var a=0;a<4;a++)$(".add-email").append("<label for='email"+a+"'>Email*</label> <input id='email"+a+"' type='email' class='form-control' name='email"+a+"' required=''>");count2240++}else if(2==count2240){for(var b=5;b<10;b++)$(".add-email").append("<label for='email"+b+"'>Email*</label> <input id='email"+b+"' type='email' class='form-control' name='email"+b+"' required=''>");count2240++,$("#add-email-btn").off("click"),document.getElementById("add-email-btn").style.display="none"}}function toggleErrorMsg(a,b){var c=a.closest(".form-group");if(null!=c)if(!1===(b=b||!1)){if(c.classList.remove("error"),null!=c.querySelector(".error-msg"))return void(c.querySelector(".error-msg").style.display="none");null!==c.querySelector(".error-message")&&c.removeChild(c.querySelector(".error-message"))}else{if(c.classList.add("error"),null!=c.querySelector(".error-msg"))return void(c.querySelector(".error-msg").style.display="block");null!=c.querySelector(".error-message")&&c.removeChild(c.querySelector(".error-message"));var d=a.validationMessage,e=a.validity;for(var f in e)if(!0===e[f]&&a.getAttribute("data-"+f)){d=a.getAttribute("data-"+f);break}c.insertAdjacentHTML("beforeend","<div class='error-message'>"+d+"</div>")}}function resetForm(a){for(var b=a.querySelectorAll(".form-control"),c=0;c<b.length;c++)b[c].value="",toggleErrorMsg(b[c],!1)}function showError(a){return a.checkValidity()?(toggleErrorMsg(a,!1),!1):(toggleErrorMsg(a,!0),!0)}function replaceValidationUI(a){var b=document.querySelectorAll("input,select,textarea"),c=["email","tel"],d=$(a).attr("data-validation-single")||"full",e=$(a).data("validate-blur"),f=function(a){a.addEventListener("blur",function(){var a=this;""==a.value?setTimeout(function(){showError(a)},500):showError(a)})};if(!0===e)for(var g=b.length;g--;)c.includes(b[g].type)?""!=b[g].getAttribute("pattern")&&null!==b[g].getAttribute("pattern")&&f(b[g]):"radio"===b[g].type||"checkbox"===b[g].type||"file"===b[g].type?function(a){a.addEventListener("change",function(){showError(this)})}(b[g]):"false"!=b[g].getAttribute("data-validate-blur")&&f(b[g]);a.addEventListener("invalid",function(a){a.preventDefault()},!0),a.addEventListener("submit",function(a){this.checkValidity()||a.preventDefault()}),a.querySelector("button:not([type=button]), input[type=submit]").addEventListener("click",function(b){for(var c=a.querySelectorAll(":invalid"),e=a.querySelectorAll(".error-message"),f=0;f<e.length;f++)e[f].parentNode.classList.remove("error"),e[f].parentNode.removeChild(e[f]);for(f=0;f<c.length&&("email"!=c[f].type||""!=c[f].getAttribute("pattern")&&null!=c[f].getAttribute("pattern")?"tel"==c[f].type?isPhoneNumberValid($(c[f])):showError(c[f]):isEmailValid($(c[f])),"full"===d);f++);c.length>0&&scrollToError(c[0])})}function scrollToError(a,b){var c;b=b||window,c="file"==a.type?$("label[for="+a.id+"]"):$(a),b==window?window.scroll(0,$(c).offset().top-$("header").height()-40):$(c)&&document.querySelector(b).scroll(0,$(c).offset().top),$(c).is("label")||c.trigger("focus")}function sanitize(a,b){return null!=b&&b.length>0?DOMPurify.sanitize(a,{ALLOWED_TAGS:b}):DOMPurify.sanitize(a,{USE_PROFILES:{html:!1}})}var OBITS=function(a,b){function c(){a("body").on("click",".view-comments-link",function(){var b=a(this).attr("data-memory-id");h(b)}),f.on("click",".video-overlay",function(){var b=f.find(".comment-video");b.length&&(b.attr({controls:"",controlslist:"nodownload",playsinline:"","webkit-playsinline":""}),b[0].play(),a(this).remove())}),f.on("click",".component-pricing.event-return a",function(a){a.preventDefault(),f.modal("hide")});var c=a(".comments-form");bindValidateEmail(c.find("#email")),c.find(".form-control").on("keypress",function(b){13===b.which&&"TEXTAREA"!=a(this).prop("nodeName")&&(b.preventDefault(),c.find(".btn-steps:visible:not(.btn-cancel)").trigger("click"))}),f.on("show.bs.modal",function(){a("#gallery-modal").hasClass("in")?f.addClass("bg-black"):f.removeClass("bg-black"),resetForm(c[0]),c.find('input[type="checkbox"]').prop("checked",!0),a(".preview-comment, .preview-name").html(""),a(".comments-thank-you, .steps").hide(),f.find(".modal-body, .step1").show()}).on("hidden.bs.modal",function(){a(".comment-video").length&&a(".comment-video")[0].pause()}),a(".btn-steps").on("click",function(){var b=a(this).data("step"),c=a(".steps:visible .form-control:visible"),d=[];if(!a(this).hasClass("btn-cancel")){for(i=0;i<c.length;i++)showError(a(c[i])[0])&&d.push(a(c[i])[0]);d.length>0&&scrollToError(d[0],"#comments-modal")}0===d.length&&(a(".steps").hide(),a(".step"+b).show(),a(this).hasClass("btn-cancel")&&f.scrollTop(a("#comment").offset().top))}),a('.btn-secondary[data-step="3"]').on("click",function(){var b=a.trim(a("#first-name").val()+" "+a("#last-name").val());a(".preview-name").html(sanitize(b));var c=a("#comment").val();a(".preview-comment").html(sanitize(c))}),c.on("submit",function(e){if(e.preventDefault(),c[0].checkValidity()&&isEmailValid(a("#email"),!0))if(c.find('button[type="submit"]').prop("disabled",!0),a(".comments-form").find("input, textarea").each(function(){var b=sanitize(a(this).val());a(this).val(b)}),b.testMode)c.find('button[type="submit"]').prop("disabled",!1),f.find(".modal-body").hide(),f.find(".comments-thank-you").show();else{var g=c.attr("data-url-submit"),h=new FormData(c[0]),i=a.ajax({url:g,method:"POST",contentType:!1,processData:!1,data:h}),j=c.attr("data-subscribe-url");i.done(function(e){a("*").removeClass("has-error"),e.errorFields?a.each(e.errorFields,function(b,c){a("[name='"+c+"']").parent().addClass("has-error error"),a("[name='"+c+"']").next(".error-msg").show()}):(j&&a("#checkboxu").is(":checked")&&d(j,b.obitId,c.find("#email").val()),f.find(".modal-body").hide(),f.find(".comments-thank-you").show())}).always(function(){c.find('button[type="submit"]').prop("disabled",!1)})}})}function d(b,c,d){a.ajax({url:b,method:"POST",contentType:"application/json; charset=utf-8",processData:!1,dataType:"json",data:JSON.stringify({obituaryId:c,email:d})})}var e,f,g=[],h=function(a){var c=b.searchMemory(a);c?k(c):(c=g.find(function(b){return b.memoryId==a}),c?k(c):j(a).done(function(a){g.push(a),k(a)}))},j=function(c){if(b.testMode)return a.getJSON("/content/js/data/memory.json");var d={obituaryId:b.obitId,memoryId:c,datasourceId:b.datasourceId};return a.ajax({url:e,method:"POST",processData:!1,contentType:"application/json; charset=utf-8",data:JSON.stringify(d)})},k=function(c){generateTemplate(c,"#comments-memory-template",".comments-memory").then(function(){generateTemplate(c,"#comments-template",".comments-container").then(function(){window.lazyLoadInstance&&lazyLoadInstance.update(),a(".comments .comment").length<=10?a(".view-more-comments").hide():(a(".comments .comment:gt(9)").hide(),f.on("click",".view-more-comments",function(){a(".comments .comment:hidden:lt(20)").show(),a(".comments .comment:visible").length==c.comments.length&&a(".comments .view-more-comments").hide()})),a("#comment-memory-id").val(c.memoryId),a("#comment-obit-id").val(b.obitId),f.modal("show")})}).catch(function(a){console.log(a)})};return b.initComments=function(a){e=a.memoryUrl||"",f=a.commentsModal||"",c()},b}(jQuery,OBITS||{});!function(a){a(function(){function b(b){var c,g=a(b).text(),h=g.match(d);null!=h&&(h.forEach(function(b){var d=0==b.indexOf("http://")||0==b.indexOf("https://")?b:"http://"+b;c="True"==a(".short-bio").attr("openurlnewtab")?(IsInternalLink(b)?e:f).trimEnd("."):IsInternalLink(b)?"":f,g=g.replace(b,"<a href= "+d+" "+c+" >"+b+"</a>")}),a(b).html(g))}function c(a){for(var b=[],c=a.length-1;c>=0;c--)""!=a[c]?b.push(a.pop()):a.pop();return b.reverse()}a(".show-support-container").each(function(){4===a(this).children(".support-card").length&&a(this).addClass("support-4")}),a("#section").length&&chopped("#section",200),a("#shortBio").length&&chopped("#shortBio",2e3),a(".see-more").on("click",function(){a(this).prev(".content").toggleClass("chopped"),a(this).toggleClass("collapsed"),a(this).find(".more").toggle(),a(this).find(".less").toggle()}),a("body").on("hide.bs.modal",".modal-video",function(){var b=a(this).find(".tribute-video");b&&b.get(0).pause()}),a("body").on("click",".view-gallery-link",function(){a("#gallery-modal .slick-slider").slick("slickGoTo",0),a("#gallery-modal").modal("show")});var d=/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@@:%_\+~#?&\/\/=]*)/g,e='target ="_blank"',f='target="_blank" rel="nofollow"';a(".short-bio:not(.autogen)").html(function(a){a=c(a.split("\n"));var b="";return a[0].length<201&&(b='<h2 class="text-center mt-30">'+a.shift()+"</h2><p>"),a=a.join("</p><p>"),""!=b?b+a+"</p>":"<p>"+a+"</p>"}(a(".short-bio").text())),a(".short-bio").find("p").each(function(a,c){b(c)})})}(window.jQuery);var OBITS=function(a,b){function c(c){p(c).done(function(d){if(!d)return a("#remembering").remove(),a(".candle").addClass("no-memory"),window.dataLayer.push({"Obituary Has Memories Flag":"False"}),void window.dataLayer.push({"Obituary Has Tribute Video Flag":"False"});if("memories"==h&&0===c){if(0===d.items.length)a("#remembering").remove(),a(".candle").addClass("no-memory"),window.dataLayer.push({"Obituary Has Memories Flag":"False"}),window.dataLayer.push({"Obituary Has Tribute Video Flag":"False"});else{window.dataLayer.push({"Obituary Has Memories Flag":"True"}),window.dataLayer.push({"Obituary Memories Count":d.interactions.totalCondolences});d.items.find(function(a){return a.hasOwnProperty("video")&&null!==a.video&&!0===a.video.tribute})?window.dataLayer.push({"Obituary Has Tribute Video Flag":"True"}):window.dataLayer.push({"Obituary Has Tribute Video Flag":"False"}),d.isFamilyTabRequired||a("#remembering .tab-list-items").remove(),a("#remembering").show()}if(b.candleFlag){var e=parseInt(d.interactions.totalCandles)||0;a(".candle-section #candle-counter").text(e),b.showHideCandleElem(e),b.checkCandle()&&(a(".candle-section .candle-button").addClass("active"),a(".candle-section .icon-candle-default").css("display","none"),a(".candle-section .icon-candle-active").css("display","inline-block"))}b.interactionFlag&&q(d.interactions),k.interactions=d.interactions}Array.prototype.push.apply(k[h].items,d.items),k[h].remaining=d.remaining,"memories"==h&&!0===m&&d.interactions.totalCondolences>=i&&(i>=f&&(i-=c),d.items.splice(i,0,j),m=!1),r(d).then(function(){window.lazyLoadInstance&&window.lazyLoadInstance.update()}).catch(function(a){console.error("error generating obit memories",a)})}).fail(function(){console.error(data.ErrorMessage),a("#remembering").remove(),a(".candle").addClass("no-memory"),window.dataLayer.push({"Obituary Has Memories Flag":"False"}),window.dataLayer.push({"Obituary Has Tribute Video Flag":"False"})})}function d(){return a(".obit-tabs-selector li.active a").attr("aria-controls")}function e(){l[h]=a("#"+h+" ul").masonry({percentPosition:!0,itemSelector:"li"})}var f,g,h,i,j,k={memories:{items:[]},family:{items:[]},interactions:{totalCondolences:0,totalShares:0,totalLikes:0,totalCandles:0}},l={memories:{},family:{}},m=!1;b.init=function(a){b.testMode=a.testMode||!1,b.obitId=b.obitId||a.obitId||"",b.interactionFlag=a.interactionFlag,b.candleFlag=a.candleFlag,f=a.requestCount,condolenceUrl=a.condolenceUrl,b.datasourceId=a.datasourceId,g=a.obitsTemplate,j=a.flowerJson||{},h=d(),i=void 0!==j.position&&parseInt(j.position)>1?parseInt(j.position)-1:0,c(0)},b.searchMemory=function(a){return k[h].items.find(function(b){return b.memoryId==a})},b.searchMemoryIndex=function(a,b){return k.memories.items.findIndex(function(b){return b.memoryId==a})},b.incrementLike=function(a){if(0!=n()){var b=k.memories.items.findIndex(function(b){return b.memoryId==a});if(b>0&&k.memories.items[b].likesCount++,o()>0){var c=k.family.items.findIndex(function(b){return b.memoryId==a});c>0&&k.family.items[c].likesCount++}}};var n=function(){return k.memories.items.length},o=function(){return k.family.items.length},p=function(c){var d={start:c,count:f,type:h,datasourceId:b.datasourceId};return i>0&&c<=i&&i<c+f&&(d.count=f-1,m=!0),b.testMode?a.getJSON("/content/js/data/data_"+c+"_"+f+"_"+h+".json"):a.ajax({url:condolenceUrl,method:"POST",processData:!1,contentType:"application/json; charset=utf-8",data:JSON.stringify(d)})},q=function(c){b.checkLiked(b.obitId)&&a(".total-likes .like-button-total").addClass("active"),a(".total-memories .icon-count").text(c.totalCondolences>0?c.totalCondolences:""),a(".total-likes .icon-count").text(c.totalLikes>0?c.totalLikes:""),a(".total-shares .icon-count").text(c.totalShares>0?c.totalShares:""),a(".condolence-icons").css("display","flex"),a(".total-memories").addClass("active"),a(".total-likes").addClass("active"),a(".total-shares").addClass("active")},r=function(b){return new Promise(function(c,d){b.items?(a("#"+h+" ul").append(g({obits:b.items})),generateTemplate(b.items,"#obits-video-template",".video-modals",!0).then(function(){window.lazyLoadInstance&&window.lazyLoadInstance.update()}).catch(function(a){console.error(a)}),l[h].length?(l[h].append(b.items).masonry("appended",b.items),l[h].masonry("reloadItems"),l[h].masonry("layout")):e(),b.remaining>0?(a("#"+h+" .load-more-count").text(b.remaining),a("#remembering #"+h+" .load-more").removeClass("hidden"),a(".load-more-btn").trigger("blur")):a("#remembering #"+h+" .load-more").addClass("hidden"),c()):d("error with obit items")})};return a("#remembering .load-more-btn").on("click",function(){c(k[h].items.length)}),a('a[data-toggle="tab"]').on("shown.bs.tab",function(a){h=d(),void 0===l[h][0]?c(0):l[h].masonry("layout")}),b}(jQuery,OBITS||{}),OBITS=function(a,b){var c;b.initGallery=function(f){c=f.galleryUrl||"",b.obitId=b.obitId||f.obitId||"",b.testMode=b.testMode||f.testMode||!1,a("body").on("show.bs.modal",".modal",function(){a("html").css("overflow-y","hidden")}).on("hidden.bs.modal",".modal",function(){a(".modal.in").length<1?a("html").css("overflow-y","auto"):a("body").addClass("modal-open")}),e().done(function(a){if(null!==a&&void 0!==a.GalleryPhotos&&a.GalleryPhotos.length){var b=a.GalleryPhotos;generateTemplate(b,"#photo-strip-template",".photo-list-container:first").then(function(){generateTemplate(b,"#obit-gallery-template",".obit-gallery").then(function(){d(),window.lazyLoadInstance&&window.lazyLoadInstance.update()}).catch(function(a){console.error(a)})}).catch(function(a){console.error(a)})}}).fail(function(){console.error("gallery ajax failed")})};var d=function(){a("#gallery-modal").on("click",".icon-overview-mode",function(){a(".slick-container").hide(),a(".obit-thumbnail-container").css("display","flex"),a(this).attr("class","icon-modal icon-gallery-mode")}),a("#gallery-modal").on("click",".icon-gallery-mode",function(){a(".obit-thumbnail-container").hide(),a(".slick-container").show(),a(this).attr("class","icon-modal icon-overview-mode")}),a(".obit-thumbnail-container").on("click",".thumb",function(){var b=parseInt(a(this).data("slide"));a("#gallery-modal .icon-gallery-mode").trigger("click"),a(".slides").slick("slickGoTo",b)}),a("#gallery-modal").on("shown.bs.modal",function(){a(".slides").slick("setPosition"),a(".captions").slick("setPosition"),a(".trays").slick("setPosition"),a(".slick-container").addClass("active")}),a("#gallery-modal").on("hidden.bs.modal",function(){a(".icon-gallery-mode").trigger("click")}),a("#obit-gallery, .photo-list").on("click","[data-slide]",function(){var b=parseInt(a(this).data("slide"));isNaN(b)||(a(".slides").slick("slickGoTo",b),a("#gallery-modal").modal("show"))}),a("#myTabPanels").on("click",".memory-img-card [data-memory-id]",function(){var b=a(this).data("memory-id"),c=parseInt(a('.thumb[data-memory-id="'+b+'"]').data("slide"));isNaN(c)||(a(".slides").slick("slickGoTo",c),a("#gallery-modal").modal("show"))}),a(".slides").not(".slick-initialized").slick({asNavFor:".captions",prevArrow:'<button class="slick-prev slick-arrow" aria-label="Previous" type="button" style=""></button>',nextArrow:'<button class="slick-next slick-arrow" aria-label="Next" type="button" style=""></button>'}),a(".captions").not(".slick-initialized").slick({asNavFor:".slides",fade:!0,arrows:!1,speed:200}),a(".slides").on("beforeChange",function(c,d,e,f){var g=a(d.$slides[f]),h=g.data("memory-id"),i=g.data("likes"),j=g.data("comments");a(".gallery-like, .gallery-comment").attr("data-memory-id",h),a(".gallery-like").text(i),b.checkLiked(h)?a(".gallery-like").addClass("active"):a(".gallery-like").removeClass("active"),a(".gallery-comment").text(j)})},e=function(){if(b.testMode)return a.getJSON("/content/js/data/gallery.json");var d={obitId:b.obitId,datasourceId:b.datasourceId};return a.ajax({url:c,method:"POST",processData:!1,contentType:"application/json; charset=utf-8",data:JSON.stringify(d)})};return b}(jQuery,OBITS||{}),OBITS=function(a,b){function c(c){c.preventDefault();var d=a(this),e=d.data("cookie-name");d.hasClass("active")||d.hasClass("processing")||b.checkCandle()||(d.addClass("processing"),h("Candle","obituary",b.obitId).done(function(){var c=a(".candle-section"),f=c.find("#candle-counter"),g=(parseInt(f.text())||0)+1;Cookies.set(e,Cookies.get(e)?Cookies.get(e)+","+b.obitId:b.obitId,{expires:d.data("cookie-expires")}),f.text(g),d.removeClass("processing").addClass("active"),c.find(".icon-candle-default").css("display","none"),c.find(".icon-candle-active").css("display","inline-block"),b.showHideCandleElem(g)}).fail(function(){d.removeClass("processing")}))}function d(c){c.preventDefault();var d=a(this),e=d.attr("data-memory-id")||b.obitId;if(!(d.hasClass("active")||d.hasClass("processing")||b.checkLiked(e))){var f=e===b.obitId?"obituary":"memory",g=a("body").find('.like-button[data-memory-id="'+e+'"]'),i=(parseInt(d.text())||0)+1,j=a(".total-likes .icon-count");g.addClass("processing"),j.addClass("processing"),h("Like",f,e).done(function(){Cookies.set("likeCookie",Cookies.get("likeCookie")?Cookies.get("likeCookie")+","+e:e,{expires:365}),g.text(i),a('.thumb[data-memory-id="'+e+'"]').data("likes",i),g.removeClass("processing"),j.removeClass("processing"),g.addClass("active"),a(".like-button-total").addClass("active"),b.incrementLike(e),void 0!==b.interactionFlag&&b.interactionFlag&&j.text((parseInt(j.text())||0)+1)}).fail(function(){console.error("like interaction failed"),g.removeClass("processing")})}}function e(){var b=a(".total-shares");a(".condolence-icons").is(":hidden")&&a(".condolence-icons").css("display","flex"),b.hasClass("active")||b.addClass("active"),b.find(".icon-count").text((parseInt(b.find(".icon-count").text())||0)+1)}function f(){a("body").on("click",".share-facebook-link",function(){h("ShareFacebook","obituary",b.obitId).done(function(){void 0!==b.interactionFlag&&b.interactionFlag&&e()})}),a("body").on("click",".share-by-email",function(a){a.preventDefault(),h("ShareEmail","obituary",b.obitId).done(function(){void 0!==b.interactionFlag&&b.interactionFlag&&e()}).always(function(){a.currentTarget.href&&(window.location.href=a.currentTarget.href)})}),a("body").on("click",".share-by-link",function(){h("ShareLink","obituary",b.obitId).done(function(){void 0!==b.interactionFlag&&b.interactionFlag&&e()})}),a(".candle-button").on("click",c),a("body").on("click",".like-button",d),a("body").on("click",".like-button-total",d)}var g;b.initTracking=function(a){b.obitId=b.obitId||a.obitId||window.obitId||"",g=a.trackInteractionUrl||"",b.testMode=b.testMode||a.testMode||!1,f()},b.showHideCandleElem=function(b){b>0&&(a(".candle-section .candle-count").show(),1==b?(a(".candle-section .candles").hide(),a(".candle-section .one-candle").show()):(a(".candle-section .candles").show(),a(".candle-section .one-candle").hide()))};var h=function(c,d,e){if(b.testMode){return a.Deferred().resolve(!0).promise()}var f={interaction:c,type:d,id:e,obitId:b.obitId};return a.ajax({type:"POST",url:g,data:JSON.stringify({model:f}),contentType:"application/json; charset=utf-8"})};return b.checkLiked=function(a){return void 0!=Cookies.get("likeCookie")&&Cookies.get("likeCookie").split(",").indexOf(a)>-1},b.checkCandle=function(){return void 0!=Cookies.get("candle")&&Cookies.get("candle").split(",").indexOf(b.obitId)>-1},b}(jQuery,OBITS||{});!function(a){a(function(){initPopover(".share-popover"),initPopover(".share-obit"),a("#copy-link-text").on("click",function(){var a=document.querySelector("#copy-link-text");a.select(),a.setSelectionRange(0,99999),document.execCommand("copy")}),a("body").on("click",".share-by-link",function(b){var c=a(this).data("hash")||"";a("#copy-link-text").val(a("#copy-link-text").val()+c),a("#share-modal").modal("show")}),a("#share-modal").on("hide.bs.modal",function(){a("#copy-link-text").val(a("#copy-link-text").data("url"))}),a("#footerTray").length&&(a("#obit").length?a(window).on("scroll load resize",function(){isOnScreen(a(".full"))||isOnScreen(a("#obit-name"))?a("#footerTray").is(":visible")&&a("#footerTray").css("display","none"):a("#footerTray").is(":visible")||a("#footerTray").css("display","block")}):(a(window).on("scroll",function(){a(window).width()<768?a(window).scrollTop()>=320&&a(window).scrollTop()<=a(document).height()-320?a("#footerTray").css("display","block"):a("#footerTray").css("display","none"):a(window).width()>=768&&(a(window).scrollTop()>=500&&a(window).scrollTop()<=a(document).height()-500?a("#footerTray").css("display","block"):a("#footerTray").css("display","none"))}),a(window).on("scroll load",function(){isOnScreen(a("#footerTray"))&&a("#footer #footer-bottom").addClass("footer-sticky-space")})))})}(window.jQuery),function(a){a(function(){a(".nav-main-list").on("show.bs.dropdown",function(b){var c=a(b.target).find(">.dropdown-toggle").data("mega-name");a("[data-mega="+c+"]").show(),a(".nav-overlay").toggleClass("show")}).on("hide.bs.dropdown",function(){a(".nav-overlay").toggleClass("show"),a(".mega-dropdown").hide()}),a(".plan-dropdown>div").on("click",function(){var b=a(this).find("a").attr("href");b&&(window.location=b)})})}(window.jQuery),function(a){function b(){if(a(window).width()<992&&a(".body-wrapper > header.nav-header").length&&!a(".body-wrapper > header.nav-header").is(":first-child")){a(".body-wrapper > #nav-main-mobile").removeAttr("style"),a(".body-wrapper > #nav-main-mobile> ul:first-child").removeAttr("style");var b=a(".body-wrapper > *:first-child").height(),c=a(".body-wrapper > header.nav-header").height(),d=-1*Math.abs(b+c-5);a(".body-wrapper > #nav-main-mobile").css({top:d+"px","z-index":19}),a(window).width()<768&&a(".body-wrapper > #nav-main-mobile> ul:first-child").css("padding-top",200+b+"px")}}function c(){if(a(window).width()<992&&a(".body-wrapper > header.nav-header").length&&!a(".body-wrapper > header.nav-header").is(":first-child")){a(".body-wrapper > #nav-main-mobile").removeAttr("style"),a(".body-wrapper > #nav-main-mobile> ul:first-child").removeAttr("style");var b=a(".body-wrapper > *:first-child").height(),c=a(".body-wrapper > header.nav-header").height(),d=-1*Math.abs(b+c-5);a(".body-wrapper > #nav-main-mobile").css({top:d+"px",height:"calc(100% - "+d+"px)","z-index":19})}}a(".nav-main-list-trigger").on("click",function(b){var c=a("html").toggleClass("nav-main-mobile-open").addClass("nav-main-mobile-transition");setTimeout(function(){c.removeClass("nav-main-mobile-transition")},350),b.preventDefault()}),a("#nav-main-mobile").on("click",function(b){"nav-main-mobile"==b.target.id&&a("html").toggleClass("nav-main-mobile-open")}),a("#nav-main-mobile").on("show.bs.collapse",function(b){a(b.target).parent("li").addClass("openPanel")}).on("hidden.bs.collapse",function(b){a(b.target).parent("li").removeClass("openPanel")}),deviceOrientation("both",b,c),a(window).on("resize",function(){deviceOrientation("both",b,c)})}(window.jQuery),function(a){function b(b,c){var d=b.offset().top;if(c){var e=c,f=e.height()-1;d=b.offset().top-f}if(b.find(".pricing-service-header")&&!b.find(".screen-title").is(":visible")){var g=b.find(".pricing-service-header").css("top")||null;g&&(d-=Math.abs(parseInt(g)))}a("body,html").animate({scrollTop:d},1e3)}function c(b){var c=a(this).scrollTop()+b.height()+2,e=function(a){var b=a.offsetLeft+a.offsetWidth,c=a.parentNode.offsetLeft+a.parentNode.offsetWidth;b>=c+a.parentNode.scrollLeft?a.parentNode.scrollLeft=b-c+50:b<=a.parentNode.offsetLeft+a.parentNode.scrollLeft&&(a.parentNode.scrollLeft=a.offsetLeft-a.parentNode.offsetLeft-50)};d.each(function(){var b=a(this).prop("hash");if(b&&!(""==b||b.indexOf("%20")>=0)&&void 0!==a(b).offset()){var d=a(b).offset().top;if(a(b).hasClass("product-service-component")&&a(b).find(".screen-title")&&!a(b).find(".screen-title").is(":visible")){var f=a(b).find(".pricing-service-header").css("top")||null;f&&(d-=Math.abs(parseInt(f)))}d<=c&&(a(this).parent().siblings().removeClass("active"),a(this).parent().addClass("active"),e(document.querySelector(".nav-secondary li.active")))}})}var d=a(".scroll");d.on("click",function(c){c.preventDefault();var d=a(this).prop("hash");if(d&&!(""==d||d.indexOf("%20")>=0)&&void 0!==a(d).offset()){a("html").hasClass("nav-main-mobile-open")&&a("html").toggleClass("nav-main-mobile-open");var e=a(this.hash);a(".sticky-nav").length?b(e,a(".sticky-nav")):a(".nav-secondary").length&&a(c.target).parents(".nav-secondary").length?b(e,a(".nav-secondary")):b(e,!1)}}),a(window).on("scroll",function(){a(".sticky-nav").length?c(a(".sticky-nav")):a(".nav-secondary").length&&c(a(".nav-secondary"))}),a(window).on("scroll load resize",function(){a(window).width()<1200&&a(".nav-secondary").length?isOnScreen(a("#home"))||isOnScreen(a(".col-xs-12 .cta-box-vertical .button-bar"))?a(".mobile-sticky-bar").hasClass("hidden")||(a(".mobile-sticky-bar").addClass("hidden"),a("#footer #footer-bottom").removeClass("footer-sticky-space")):isOnScreen(a(".col-xs-12 .cta-box-vertical .button-bar"))||a(".mobile-sticky-bar").hasClass("hidden")&&(a(".mobile-sticky-bar").removeClass("hidden"),a("#footer #footer-bottom").addClass("footer-sticky-space")):a(window).width()>1200&&a(".nav-secondary").length&&(isOnScreen(a("#home"))||!isOnScreen(a("#home"))||isOnScreen(a(".col-xs-12 .cta-box-vertical .button-bar")))&&(a(".mobile-sticky-bar").hasClass("hidden")||(a(".mobile-sticky-bar").addClass("hidden"),a("#footer #footer-bottom").removeClass("footer-sticky-space")))}),a(".screen-title-overlay").length&&a("body").materialScrollTop({revealElement:".screen-title-overlay",revealPosition:"bottom"}),function(b){a(b).on("click",function(){a("html, body").animate({scrollTop:0},1e3)})}(a(".scrollToTop"))}(window.jQuery);var myDefaultWhiteList=$.fn.tooltip.Constructor.DEFAULTS.whiteList;myDefaultWhiteList.a=["data-toggle","data-target","href","target","title","rel","id","onclick","tabindex","data-hash","class"];var count2240=1,html2240="";!function(a){for(var b=document.querySelectorAll("form.salesforce-form, form.pardot-form, form.pardot-price-form, form.validate-form"),c=b.length;c--;)replaceValidationUI(b[c])}(window.jQuery);